/*! search-excerpt-generator v0.1.0 - https://github.com/daveallie/search-excerpt-generator */
!function(a){"use strict";var b=function(){var a={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},b={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},c="[^aeiou]",d="[aeiouy]",e=c+"[^aeiouy]*",f=d+"[aeiou]*",g="^("+e+")?"+f+e,h="^("+e+")?"+f+e+"("+f+")?$",i="^("+e+")?"+f+e+f+e,j="^("+e+")?"+d;return function(c){var f,k,l,m,n,o,p,q;return!c||c.length<3?c:(l=c.substr(0,1),"y"==l&&(c=l.toUpperCase()+c.substr(1)),m=/^(.+?)(ss|i)es$/,n=/^(.+?)([^s])s$/,m.test(c)?c=c.replace(m,"$1$2"):n.test(c)&&(c=c.replace(n,"$1$2")),m=/^(.+?)eed$/,n=/^(.+?)(ed|ing)$/,m.test(c)?(q=m.exec(c),m=new RegExp(g),m.test(q[1])&&(m=/.$/,c=c.replace(m,""))):n.test(c)&&(q=n.exec(c),f=q[1],n=new RegExp(j),n.test(f)&&(c=f,n=/(at|bl|iz)$/,o=new RegExp("([^aeiouylsz])\\1$"),p=new RegExp("^"+e+d+"[^aeiouwxy]$"),n.test(c)?c+="e":o.test(c)?(m=/.$/,c=c.replace(m,"")):p.test(c)&&(c+="e"))),m=/^(.+?)y$/,m.test(c)&&(q=m.exec(c),f=q[1],m=new RegExp(j),m.test(f)&&(c=f+"i")),m=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,m.test(c)&&(q=m.exec(c),f=q[1],k=q[2],m=new RegExp(g),m.test(f)&&(c=f+a[k])),m=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,m.test(c)&&(q=m.exec(c),f=q[1],k=q[2],m=new RegExp(g),m.test(f)&&(c=f+b[k])),m=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,n=/^(.+?)(s|t)(ion)$/,m.test(c)?(q=m.exec(c),f=q[1],m=new RegExp(i),m.test(f)&&(c=f)):n.test(c)&&(q=n.exec(c),f=q[1]+q[2],n=new RegExp(i),n.test(f)&&(c=f)),m=/^(.+?)e$/,m.test(c)&&(q=m.exec(c),f=q[1],m=new RegExp(i),n=new RegExp(h),o=new RegExp("^"+e+d+"[^aeiouwxy]$"),(m.test(f)||n.test(f)&&!o.test(f))&&(c=f)),m=/ll$/,n=new RegExp(i),m.test(c)&&n.test(c)&&(m=/.$/,c=c.replace(m,"")),"y"==l&&(c=l.toLowerCase()+c.substr(1)),c)}}(),c=function(){var a=["","a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"];return function(b){if(b&&a.indexOf(b)===-1)return b}}(),d=function(){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return function(b){return String(b).replace(/[&<>"'\/]/g,function(b){return a[b]})}}(),e=function(a){return(a.match(/[a-z].*[a-z]/)||[])[0]},f=function(a,b){var c=a.match(/\S+/g)||[],d=0;if(0===c.length)return"No content";for(var e=0,f=c.length;e<f;e++){if(c[e].length+d>b)return c.slice(0,e).join(" ");d+=c[e].length}return c.join(" ")},g=function(){var a=function(a,b,c){if(0===b.length)return f(a,c-3)+"...";for(var d=a.match(/\S+/g)||[],e=new h(b[0],4,d),g=1,i=b.length;g<i;g++)e.join(new h(b[g],4,d));return e.toHTML()},d=function(a,d){for(var f,g,h=a.toLowerCase().match(/\S+/g)||[],i=[],j=0,k=h.length;j<k;j++)if(f=e(h[j])){g=f.match(/[a-z]+[:\-][a-z]+/)||[f];for(var l=0,m=g.length;l<m;l++)f=c(b(g[l])),f&&i.push(f)}this.tokens=i,this.maxLength=d};d.prototype.generateExcerpt=function(c){if(0===this.tokens.length)return a(c,[],this.maxLength);for(var d,f,g=[],h=c.toLowerCase().match(/\S+/g)||[],i=0,j=h.length;i<j;i++)if(d=e(h[i])){f=d.match(/[a-z]+[:\-][a-z]+/)||[d];for(var k=0,l=f.length;k<l;k++)if(d=b(f[k]),d&&this.tokens.indexOf(d)>-1){g.push(i);break}}return a(c,g,this.maxLength)}}();a.SearchExcerptGenerator=g;var h=function(){var a=function(a,b,c){this.start=Math.max(a-b,0),this.finish=Math.min(a+b+1,c.length),this.words=c.slice(this.start,this.finish),this.indicies=[a-this.start]};return a.prototype.join=function(a){this.finish>=a.start?this.words.slice(0,this.words.length-(a.start-this.finish)):this.words.push("...");for(var b=0,c=a.indicies;b<c;b++)this.indicies.push(a.indicies[b]+this.words.length);this.words=this.words.concat(a.words),this.finish=a.finish},a.prototype.toHTML=function(){for(var a=0===this.start?"":"...",b=0,c=this.words.length;b<c;b++)a+=this.indicies.indexOf(b)>-1?" <b>"+d(this.words[b])+"</b>":" "+d(this.words[b]);return a.trim()+" ..."},a}()}(window);